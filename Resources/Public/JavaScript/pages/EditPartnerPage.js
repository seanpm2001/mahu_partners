mahupartners.EditPartnerPage=class extends mahupartners.AbstractPage{render(){}addListeners(){super.addListeners();let t=$("article.partnerPageContent").attr("data-cuid");$("#"+t+"-form-type").change(function(t){1===t.target.selectedIndex?($("#researchDetails").hide(),$("#companyDetails").show(),$("label[for$='form-name']").html(mahupartners.Localization.getString("partnerpage.new.name.1")+' <span class="required">*</span>'),$("input[id$='form-name']").siblings("span.help-block").hide()):2===t.target.selectedIndex?($("#researchDetails").show(),$("#companyDetails").hide(),$("label[for$='form-name']").html(mahupartners.Localization.getString("partnerpage.new.name.2")+' <span class="required">*</span>'),$("input[id$='form-name']").siblings("span.help-block").show()):($("#researchDetails").hide(),$("#companyDetails").hide(),$("label[for$='form-name']").html(mahupartners.Localization.getString("partnerpage.new.name.1")+' <span class="required">*</span>'),$("input[id$='form-name']").siblings("span.help-block").hide())}),$("#"+t+"-form-superordinate").chosen({width:"100%",search_contains:!0});let e=$("input[name='logofile']")[0];if(e){let t=$(".previewcontainer img")[0];t&&(e.onchange=function(n){let a=e.files;a&&1==a.length&&(t.src=URL.createObjectURL(a[0]),$(t).show(),$(".previewcontainer span").hide())})}const n=function(t){let e=-1;return t.each(function(t,n){let a=$(n).attr("data-id");e=Math.max(e,a)}),e+1};$(".editform #abort").click(function(t){t.preventDefault(),t.stopPropagation();let e=$(this).attr("data-url");e&&(window.location=e)}),$(".addContactBtn").on("click keyup",function(e){if("keyup"===e.type&&13!=e.keyCode)return;let a=$("div#contactFieldsets"),s=n($("div#contactFieldsets fieldset")),r=mahupartners.Localization,i=`\n\t\t\t<fieldset data-id="${s}">\n\t\t\t\t<legend class="control-label">${r.getString("Kontakt")}\n\t\t\t\t<a class="deleteContactBtn" tabindex="0" title="${r.getString("Entfernen")}">\n\t\t\t\t\t<i class="fas fa-trash-alt smallicon" aria-hidden="true"></i>\n\t\t\t\t</a></legend>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="repeatable-container">\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-contacts_${s}_surname">${r.getString("Vorname")}</label>\n\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-contacts_${s}_surname"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][contacts][${s}][surname]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-contacts_${s}_familyname">${r.getString("Nachname")}</label>\n\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-contacts_${s}_familyname"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][contacts][${s}][familyname]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-contacts_${s}_title">${r.getString("Titel")}</label>\n\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-contacts_${s}_title"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][contacts][${s}][title]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-contacts_${s}_position">${r.getString("Position")}</label>\n\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-contacts_${s}_position"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][contacts][${s}][position]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-contacts_${s}_email">${r.getString("E-Mail")}\n\t\t\t\t\t\t\t\t<span class="required">*</span>\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input required="required"\n\t\t\t\t\t\t\t\t\tclass=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-contacts_${s}_email"\n\t\t\t\t\t\t\t\t\ttype="email"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][contacts][${s}][email]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-contacts_${s}_phone">${r.getString("Telefon")}</label>\n\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-contacts_${s}_phone"\n\t\t\t\t\t\t\t\t\ttype="tel"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][contacts][${s}][phone]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-contacts_${s}_fax">${r.getString("Fax")}</label>\n\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-contacts_${s}_fax"\n\t\t\t\t\t\t\t\t\ttype="tel"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][contacts][${s}][fax]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-contacts_${s}_material_classes">${r.getString("Materialklassen")}</label>\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-contacts_${s}_material_classes"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][contacts][${s}][material_classes]">\n\t\t\t\t\t\t\t\t<span class="help-block">${r.getString("Materialklassen.contact.help")}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</fieldset>`;a.append(i);let l=a.find("fieldset[data-id='"+s+"']");$(".deleteContactBtn",l).on("click keyup",function(t){if("keyup"===t.type&&13!=t.keyCode)return;$(t.target).parents("fieldset").remove()}),$("html,body").animate({scrollTop:l.offset().top},1050,"easeInOutExpo")}),$(".addExpertiseBtn").on("click keyup",function(e){if("keyup"===e.type&&13!=e.keyCode)return;let a=$("div#expertisesFieldsets"),s=n($("div#expertisesFieldsets fieldset")),r=mahupartners.Localization,i=`\n\t\t\t<fieldset data-id="${s}">\n\t\t\t\t<legend class="control-label">${r.getString("Expertise")}\n\t\t\t\t\t<a class="deleteExpertiseBtn" tabindex="0" title="${r.getString("Entfernen")}">\n\t\t\t\t\t\t<i class="fas fa-trash-alt smallicon" aria-hidden="true"></i>\n\t\t\t\t\t</a>\n\t\t\t\t</legend>\n\t\t\t\t\t\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="repeatable-container">\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-expertises_${s}_type">${r.getString("Typ")} <span class="required">*</span></label>\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<select required="required"\n\t\t\t\t\t\t\t\t\tclass=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-expertises_${s}_type"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][expertises][${s}][type]">\n\t\t\t\t\t\t\t\t\t<option\tvalue="0">${r.getString("Typ.0")}</option>\n\t\t\t\t\t\t\t\t\t<option value="1">${r.getString("Typ.1")}</option>\n\t\t\t\t\t\t\t\t\t<option value="2">${r.getString("Typ.2")}</option>\n\t\t\t\t\t\t\t\t\t<option value="3">${r.getString("Typ.3")}</option>\n\t\t\t\t\t\t\t\t\t<option value="4">${r.getString("Typ.4")}</option>\n\t\t\t\t\t\t\t\t\t<option value="5">${r.getString("Typ.5")}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-expertises_${s}_name">${r.getString("Bezeichnung")}</label>\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-expertises_${s}_name"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][expertises][${s}][name]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-expertises_${s}_description">${r.getString("Beschreibung")}</label>\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\tclass="xxlarge form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-expertises_${s}_description"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][expertises][${s}][description]"></textarea>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-expertises_${s}_purpose">${r.getString("Zweck")}</label>\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-expertises_${s}_purpose"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][expertises][${s}][purpose]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-expertises_${s}_quantities">${r.getString("Abnahmemenge")}</label>\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-expertises_${s}_quantities"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][expertises][${s}][quantities]">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<div class="input checkbox">\n\t\t\t\t\t\t\t\t<div class="form-check">\n\t\t\t\t\t\t\t\t\t<label class="add-on form-check-label" for="${t}-form-expertises_${s}_customization">\n\t\t\t\t\t\t\t\t\t<input id="${t}-form-expertises_${s}_customization"\n\t\t\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][expertises][${s}][customization]"\n\t\t\t\t\t\t\t\t\t\tvalue="1"> <span>${r.getString("Eingehen auf Kundenwünsche")}</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-expertises_${s}_material_classes">${r.getString("Materialklassen")}</label>\n\t\t\t\t\t\t\t<div class="input">\n\t\t\t\t\t\t\t\t<input  class=" form-control"\n\t\t\t\t\t\t\t\t\tid="${t}-form-expertises_${s}_material_classes"\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tname="tx_mahupartners_mahupartners[company][expertises][${s}][material_classes]">\n\t\t\t\t\t\t\t\t<span class="help-block">${r.getString("Materialklassen.expertise.help")}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label class="control-label" for="${t}-form-expertises_${s}_regulations">${r.getString("Regularien")}</label>\n\t\t\t\t\t\t\t<div class="input expertises-list">\n\t\t\t\t\t\t\t\t<span class="help-block">${r.getString("Regularien.help")}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</fieldset>`;a.append(i);let l=$("#"+t+"-form-expertises_template").clone();l.attr("name",l.attr("name").replace("_temp_",s)),l.attr("id",t+"-form-expertises_"+s+"_regulations"),a.find("fieldset[data-id='"+s+"'] .expertises-list").prepend(l);let o=a.find("fieldset[data-id='"+s+"']");$(".deleteExpertiseBtn",o).on("click keyup",function(t){if("keyup"===t.type&&13!=t.keyCode)return;$(t.target).parents("fieldset").remove()}),$("html,body").animate({scrollTop:o.offset().top},1050,"easeInOutExpo")}),$(".deleteContactBtn",$("div#contactFieldsets")).on("click keyup",function(t){if("keyup"===t.type&&13!=t.keyCode)return;$(t.target).parents("fieldset").remove()}),$(".deleteExpertiseBtn",$("div#expertisesFieldsets")).on("click keyup",function(t){if("keyup"===t.type&&13!=t.keyCode)return;$(t.target).parents("fieldset").remove()})}};